text	segment 'code'
	assume CS:text,DS:data
stop    proc
        mov AH,08h      
        int 21h         
        cmp AL,44h ; f10
        je exit
        ret             
exit:   
	mov AX,4C00h        
        int 21h     
stop    endp

new_65h proc
;Процедура наложения на экран цветного окна для динамической
;очистки экрана по ходу выполнения программы
	mov  	AH, 06h     ;Функция задания окна
	mov   	AL,0         ;Режим создания окна
	mov  	BH,1Bh     ;Атрибут всех символов в окне: светло-бирюзовые символы, синий фон
	mov   	CX,0       ;Координаты верхнего левого угла 0,0
	mov  	DH,24       ;Нижняя Х-координата
	mov  	DL,79       ;Правая Х-координата
	int  	10h              ;Прерывание BIOS
iret
new_65h   endp
main  proc

	mov   AX,data
	mov   DS,AX 
;Заполним вектор прерывания пользователя адресом нашего обработчика
begin:	mov   AH,25h     ;Функция заполнения вектора прерывания
	mov   AL,65h     ;Номер вектора
	mov   DX,offset new_65h ;Смещение прикладного обработчика
	push DS              ;Сохранны DS
	push CS              ;Настроим DS на сегмент команд (в
	pop DS                ;котором находится наш обработчик)
	int   21h               ;Вызовем DOS
	pop   DS              ;Восстановим DS
;Будем в цикле выводить ил экран строки с предварительной очисткой экрана 
gogo:	int   65h               ;Вызов прикладного обработчика (очистка
                                            ;экрана перед выводом текста) 
;Позиционируем курсор
	mov   AH,02h     ;Функция позиционирования
	mov   BH,0         ;Видеостраница
	mov   DH,line     ;Строка
	mov   DL,coloumn ;Столбец
	int   	10h               ;Прерывание BIOS 
;Выведем на экран строку символов
	mov  AH,0Ah      ;функция вывода символа без атрибута
	mov  AL,sym       ;Символ
	mov  BH,0            ;Видеостраница
	mov  CX,60          ;Коэффициент повторения
	int   10h                 ;Прерывание BIOS 
;Изменим символ и позицию и зациклим программу с возможностью
 ;завершения по нажатию клавиш <Ctri>/C
	inc   sym             ;Следующий символ по таблице ASCII
	inc  line               ;Следующая строка экрана
	call stop
	;mov   AH,08h     ;Функция ввода баз эха, чувствует <Ctri>/C
	;int   21h
jmp  gogo            ;Бесконечный цикл 
main endp                            ;Поля данных
text ends
data  segment 
	line db 2                               ;Строка 
	coloumn db 10	             ;Столбец 
	sym db 01h                           ;Выводимый символ
data ends
end main 