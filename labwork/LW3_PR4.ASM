text    segment 'code'
        assume CS:text, DS:data
begin: 	mov DS, AX      
;Установим графический режим 103h SVGA
	mov AH,4Fh	;(1)Функция вызова Video BIOS Extention
	mov AL,02h	;(2)Подфункция установки графического режима
	mov BX,103h	;(3)Графический режим SVGA
	int 10h		;(4)Прерывание BIOS
	cmp AH,0	;(5)При ошибке
	jne errmes1	;(6)Переход на сообщение
;Установим в регистре 150 таблицы цветов зеленый цвет максимальной яркости
	mov AH,10h	;(13)Функция управления регистрами палитры
	mov AL,10h	;(14)Подфункция установки регистра цветов
	mov BX,150	;(15)Номер регистра таблицы цветов(0-255)
	mov DH,0	;(16)Интенсивность красного цвета (6 бит)
	mov CH,127	;(17)Интенсивность зеленого цвета (6 бит)
	mov CL,0	;(18)Интенсивность синего цвета (6 бит)
	int 10h		;(19)Прерывание BIOS
;Нарисуем прямую линию в цикле по х
	mov SI,0	;(20)Начальная Х-координата
	mov CX,800	;(21)Число точек по горизонтали
line:	push CX		;(22)Сохраним его в стеке
	mov AH,0Ch	;(23)Функция вывода пиксела
	mov AL,150	;(24)Цвет зеленый
	mov BH,0	;(25)Видеостраница
	mov CX,SI	;(26)Х-координата (переменная)
	mov DX,300	;(27)Y-координата (константа)
	int 10h		;(28)Вызов BIOS
	inc SI		;(29)Инкремент Х-координаты
	pop CX		;(30)Восстановление счетчика шагов
	loop line		;(31)Цикл из CX шагов
;Остановим программу для наблюдения результатов ее работы
	mov AH,08h	;(32)Функция ввода с клавиатуры без эха
	int 21h		;(33)Вызов DOS
;Переключим видеоадаптер назад в текстовый режим
	mov AX,3	;(34)Установка текстового режима
	int 10h		;(35)Вызов BIOS
	jmp output	;(36)
errmes1:
	mov AH,09h	;(37)функция вывода сообщения
	mov DX,offset message	;(38)Смещение сообщения
	int 21h		;(39)Вызов DOS
output:
	mov AH,09h
	mov DX, offset msg
	int 21h
exit:
	mov AX,4C00h
	int 21h
text    ends 
data segment
 msg     db 'The end$'                
 message db 'Error$'                       
data ends                           ; 
stk     segment stack 'stack'             
        dw  128 dup (0)             ; 
stk     ends                        ; 
        end begin                   ; 
